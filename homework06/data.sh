#!/bin/sh

cat demographics.csv |  awk -F , '{ 
	
	s2013[$1]++
	r2013[$2]++
	
	s2014[$3]++ 
	r2014[$4]++
	
	s2015[$5]++ 
	r2015[$6]++
	
	s2016[$7]++
	r2016[$8]++ 
	
	s2017[$9]++ 
	r2017[$10]++
	
	s2018[$11]++
	r2018[$12]++
}	

END {
		
	tot2013 = s2013["M"] + s2013["F"];
	tot2014 = s2014["M"] + s2014["F"];
	tot2015 = s2015["M"] + s2015["F"];
	tot2016 = s2016["M"] + s2016["F"];
	tot2017 = s2017["M"] + s2017["F"];
	tot2018 = s2018["M"] + s2018["F"];
	
	split("MFCOSBNTU", a, "")
	
	for (i=1; i<= 7; i++){
		if (r2013[a[i]] == 0){ r2013[a[i]] = 0 }
		if (r2014[a[i]] == 0){ r2014[a[i]] = 0 }
		if (r2015[a[i]] == 0){ r2015[a[i]] = 0 }
		if (r2016[a[i]] == 0){ r2016[a[i]] = 0 }
		if (r2017[a[i]] == 0){ r2017[a[i]] = 0 }
		if (r2018[a[i]] == 0){ r2018[a[i]] = 0 }
	}
		
	# 2013 Results
	print "2013,", s2013["M"]*100/tot2013, ",", s2013["F"]*100/tot2013, ",", r2013["C"]*100/tot2013, ",", r2013["O"]*100/tot2013, ",", r2013["S"]*100/tot2013, ",", r2013["B"]*100/tot2013, ",", r2013["N"]*100/tot2013, ",", r2013["T"]*100/tot2013, ",", r2013["U"]*100/tot2013
	
	# 2014 Results
	print "2014,", s2014["M"]*100/tot2014, ",", s2014["F"]*100/tot2014, ",", r2014["C"]*100/tot2014, ",", r2014["O"]*100/tot2014, ",", r2014["S"]*100/tot2014, ",", r2014["B"]*100/tot2014, ",", r2014["N"]*100/tot2014, ",", r2014["T"]*100/tot2014, ",", r2014["U"]*100/tot2014
	
	# 2015 Results
	print "2015,", s2015["M"]*100/tot2015, ",", s2015["F"]*100/tot2015, ",", r2015["C"]*100/tot2015, ",", r2015["O"]*100/tot2015, ",", r2015["S"]*100/tot2015, ",", r2015["B"]*100/tot2015, ",", r2015["N"]*100/tot2015, ",", r2015["T"]*100/tot2015, ",", r2015["U"]*100/tot2015
	
	# 2016 Results
	print "2016,", s2016["M"]*100/tot2016, ",", s2016["F"]*100/tot2016, ",", r2016["C"]*100/tot2016, ",", r2016["O"]*100/tot2016, ",", r2016["S"]*100/tot2016, ",", r2016["B"]*100/tot2016, ",", r2016["N"]*100/tot2016, ",", r2014["T"]*100/tot2014, ",", r2014["U"]*100/tot2014
	
	# 2017 Results
	print "2017,", s2017["M"]*100/tot2017, ",", s2017["F"]*100/tot2017, ",", r2017["C"]*100/tot2017, ",", r2017["O"]*100/tot2017, ",", r2017["S"]*100/tot2017, ",", r2017["B"]*100/tot2017, ",", r2017["N"]*100/tot2017, ",", r2017["T"]*100/tot2017, ",", r2017["U"]*100/tot2017
	
	# 2018 Results
	print "2018,", s2018["M"]*100/tot2018, ",", s2018["F"]*100/tot2018, ",", r2018["C"]*100/tot2018, ",", r2018["O"]*100/tot2018, ",", r2018["S"]*100/tot2018, ",", r2018["B"]*100/tot2018, ",", r2018["N"]*100/tot2018, ",", r2018["T"]*100/tot2018, ",", r2018["U"]*100/tot2018

	
	}' > data.csv
